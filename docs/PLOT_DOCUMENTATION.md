# Plot Documentation: Typometric Analysis Visualizations

This document provides a comprehensive guide to all plots generated by the typometric analysis pipeline.

---

## Table of Contents

1. [Overview](#overview)
2. [Word vs. Letter Size Analysis](#word-vs-letter-size-analysis)
3. [MAL Plots (Mean Aggregate Length)](#mal-plots-mean-aggregate-length)
4. [HCS Plots (Hierarchical Complexity Score)](#hcs-plots-hierarchical-complexity-score)
5. [Diagonal Factor Plots](#diagonal-factor-plots)
6. [Head Initiality Correlation Plots](#head-initiality-correlation-plots)
7. [Subject-Verb vs. Verb-Object Analysis](#subject-verb-vs-verb-object-analysis)
8. [Bastard Dependency Analysis](#bastard-dependency-analysis)
9. [Disorder Metrics](#disorder-metrics)
10. [Language Subset Plots](#language-subset-plots)

---

## Overview

The typometric analysis pipeline generates approximately **800+ plots** across multiple categories. Plots are organized by:

- **Type**: Scatter plots, heatmaps, curves, distributions
- **Linguistic Variable**: Constituent size, word order, dependency patterns
- **Language Subset**: All languages, Indo-European, VO/OV, Head-Initial/Final

### Output Directories

```
plots/                    # Main plot directory
├── *.png                 # Individual plots
IE-plots/                # Indo-European subset plots
noIE-plots/              # Non-Indo-European subset plots
headInit-plots/          # Head-initial languages
headFinal-plots/         # Head-final languages
VO-plots/                # Verb-Object order languages
OV-plots/                # Object-Verb order languages
NDO-plots/               # No Dominant Order languages
```

---

## Word vs. Letter Size Analysis

### `word_vs_letter_size.png`

**Generated by**: Notebook 05, Cell 7 (`plot_word_vs_letter_size()`)

**Description**: Scatter plot comparing average word size (in words) versus average letter size (in letters) across languages.

**Axes**:
- **X-axis**: Average Letter Size (mean number of letters per position)
- **Y-axis**: Average Word Size (mean number of words per position)

**Features**:
- Color-coded by language family
- Diagonal reference line (y = x)
- Regression line showing overall correlation
- Average ratio line
- Labeled outliers and notable languages

**Interpretation**:
- Points above diagonal: Languages with more words than letters per constituent
- Points below diagonal: Languages with more letters than words per constituent
- Positive correlation suggests co-variation between word and letter complexity

---

## MAL Plots (Mean Aggregate Length)

### Pattern: `MAL_{position1}_vs_{position2}.png`

**Generated by**: `plot_dependency_sizes()`

**Description**: Scatter plots showing the relationship between constituent sizes at different verb-centered positions.

**Common Patterns**:
- `MAL_right_1_totright_2_vs_right_2_totright_2.png`: R1 vs R2 for patterns with 2 right dependents
- `MAL_left_1_totleft_2_vs_left_2_totleft_2.png`: L1 vs L2 for patterns with 2 left dependents

**Axes**:
- **X-axis**: Constituent size at position 1 (e.g., R1)
- **Y-axis**: Constituent size at position 2 (e.g., R2)

**Features**:
- Color-coded by language family
- Diagonal reference line (y = x)
- Linear regression line
- Correlation coefficient displayed

**Interpretation**:
- Points above diagonal: Position 2 larger than Position 1
- Positive correlation: Both positions grow together
- Slope indicates relative growth rate

### MAL Curves

**Generated by**: `plot_mal_curves_with_groups()`

**Description**: Line plots showing Mean Aggregate Length (MAL) curves across positions for different language groups.

**Features**:
- Multiple curves for different language families
- X-axis: Position relative to verb (L4, L3, L2, L1, V, R1, R2, R3, R4)
- Y-axis: Mean constituent size
- Shows how complexity changes with distance from verb

---

## HCS Plots (Hierarchical Complexity Score)

### Pattern: `HCS_{position_pattern}.png`

**Generated by**: `plot_hcs_factor()`

**Description**: Scatter plots showing Hierarchical Complexity Score - the ratio between nested positions versus adjacent positions.

**Formula**: `HCS = (pos_nested / pos_adjacent)`

**Example**: 
- `HCS_right_2_totright_2_vs_right_1_totright_1.png`
  - Compares R2 when tot=2 against R1 when tot=1
  - Measures how much additional complexity arises from nesting

**Axes**:
- **X-axis**: Size at simpler position (e.g., R1 with tot=1)
- **Y-axis**: Size at more complex position (e.g., R2 with tot=2)

**Features**:
- Diagonal line (y = x) for reference
- Regression line
- HCS factor displayed (slope interpretation)

**Interpretation**:
- HCS > 1: Nested structures are larger (hierarchical complexity)
- HCS < 1: Nested structures are smaller (compression effect)
- HCS ≈ 1: No hierarchical effect

---

## Diagonal Factor Plots

### Pattern: `DIAG_{side}_{positions}.png`

**Generated by**: Verb-centered helix tables with diagonal factors enabled

**Description**: Shows diagonal growth factors - how constituent size changes when moving diagonally through the helix (increasing both position and tot).

**Examples**:
- `DIAG_right_2_totright_2_vs_right_1_totright_1.png`
- `DIAG_left_3_totleft_3_vs_left_2_totleft_2.png`

**Diagonal Factor Formula**: 
```
Diagonal Factor = size(pos+1, tot+1) / size(pos, tot)
```

**Interpretation**:
- Factor > 1: Size increases along diagonal trajectory
- Factor < 1: Size decreases along diagonal trajectory
- Reveals patterns of nested hierarchical growth

---

## Head Initiality Correlation Plots

### `head_init_vs_*.png`

**Generated by**: `plot_head_initiality_vs_factors()`

**Description**: Scatter plots correlating Head Initiality Score with various linguistic metrics.

**Head Initiality Score**:
- Range: 0.0 to 1.0
- 0.0 = Strictly head-final
- 1.0 = Strictly head-initial
- Based on multiple syntactic constructions (not just VO order)

**Common Plots**:
1. **`head_init_vs_hcs_right.png`**: Head initiality vs. right-side hierarchical complexity
2. **`head_init_vs_hcs_left.png`**: Head initiality vs. left-side hierarchical complexity
3. **`head_init_vs_asymmetry.png`**: Head initiality vs. left-right asymmetry

**Features**:
- Color-coded by language family
- Regression line and correlation coefficient
- Vertical line at 0.5 (typological midpoint)

**Interpretation**:
- Positive correlation: Metric increases with head-initiality
- Negative correlation: Metric decreases with head-initiality
- No correlation: Metric independent of head position

---

## Subject-Verb vs. Verb-Object Analysis

### `sv_vs_vo_*.png`

**Generated by**: `plot_sv_vs_vo_scatter_batch()`

**Description**: Scatter plots comparing Subject-Verb order (SV score) against Verb-Object order (VO score).

**Scores**:
- **VO Score**: Proportion of nominal objects appearing after verb (0.0 = OV, 1.0 = VO)
- **SV Score**: Proportion of nominal subjects appearing after verb (0.0 = SV, 1.0 = VS)

**Common Files**:
- `sv_vs_vo_all.png`: All languages
- `sv_vs_vo_vo.png`: Only VO languages (VO score > 0.666)
- `sv_vs_vo_ov.png`: Only OV languages (VO score < 0.333)
- `sv_vs_vo_ie.png`: Indo-European languages only
- `sv_vs_vo_noie.png`: Non-Indo-European languages

**Features**:
- Color-coded by language family
- Quadrants show typological categories:
  - **Bottom-left**: SV & OV
  - **Bottom-right**: SV & VO
  - **Top-left**: VS & OV (rare)
  - **Top-right**: VS & VO
- Diagonal zones show flexible order

**Interpretation**:
- Most languages cluster in SV region (subjects typically before verb)
- VO/OV distinction more variable than SV/VS
- Some families show tighter clustering than others

---

## Bastard Dependency Analysis

"Bastard" dependencies are non-projective or displaced dependencies where a dependent appears in an unexpected position (typically not adjacent to its head in the linear word order).

### `bastard_distribution.png`

**Generated by**: Notebook 05, Bastard Analysis section

**Description**: Histogram showing the distribution of bastard dependency percentages across languages.

**Axes**:
- **X-axis**: Bastard Dependencies per Verb (%)
- **Y-axis**: Count of Languages

**Features**:
- KDE (Kernel Density Estimate) overlay
- Shows typical range and outliers

**Interpretation**:
- Mode indicates typical bastard percentage
- Right tail shows languages with high non-projectivity
- Useful for understanding cross-linguistic variation

### `bastard_vs_vo_score.png`

**Generated by**: `plot_bastard_vs_vo_score()`

**Description**: Scatter plot correlating bastard dependency percentage with VO score.

**Axes**:
- **X-axis**: VO Score (0 = OV, 1 = VO)
- **Y-axis**: Bastard Dependencies (%)

**Features**:
- Color-coded by language family
- Vertical line at VO score = 0.5
- Top 5 "most bastardly" languages labeled
- Regression line

**Research Question**: Do VO/OV languages differ in non-projectivity?

### `bastard_by_family.png`

**Generated by**: Notebook 05, Bastard Analysis section

**Description**: Box plot showing bastard percentage distributions by major language families.

**Features**:
- Shows median, quartiles, and outliers for each family
- Limited to top 10 families by sample size
- Color-coded by family

**Interpretation**:
- Some families systematically more non-projective
- Variation within families also visible

### `top_bastard_distribution.png`

**Generated by**: `plot_top_bastard_distribution()`

**Description**: Bar chart showing the most common dependency relations that become "bastards" (non-projective).

**Features**:
- X-axis: Dependency relation type (e.g., `nsubj`, `obj`, `obl`)
- Y-axis: Frequency
- Shows which grammatical roles most often displaced

### `bastard_relation_by_family.png`

**Generated by**: `plot_bastard_relation_by_family()`

**Description**: Heatmap showing which dependency relations are bastards in which language families.

**Axes**:
- **X-axis**: Language families
- **Y-axis**: Dependency relation types
- **Color**: Frequency/percentage

**Interpretation**:
- Reveals family-specific patterns of displacement
- Some relations consistently projective across families
- Others show high cross-linguistic variation

### `bastard_relations_stacked.png`

**Generated by**: `plot_additive_bastard_histogram()`

**Description**: Stacked histogram showing the composition of bastard dependencies per language.

**Features**:
- X-axis: Languages (sorted by total bastard percentage)
- Y-axis: Percentage or count
- Stacked bars colored by relation type
- Shows both which languages have many bastards AND which relations contribute

---

## Disorder Metrics

### `{side}_diag_factor_vs_disorder.png`

**Generated by**: `plot_disorder_metrics_vs_vo()`

**Description**: Scatter plots correlating diagonal factors with sentence disorder metrics.

**Examples**:
- `left_diag_factor_vs_disorder.png`
- `right_diag_factor_vs_disorder.png`

**Axes**:
- **X-axis**: Diagonal growth factor (hierarchical complexity)
- **Y-axis**: Disorder percentage

**Disorder Metrics**:
- Measures how often word order deviates from canonical/expected patterns
- Based on dependency distances and crossing dependencies

**Interpretation**:
- Positive correlation: More hierarchical complexity → more disorder
- Negative correlation: More hierarchical complexity → more order
- Tests relationship between structural complexity and linear order flexibility

### `{side}_extreme_diag_factor_vs_vo.png`

**Description**: Diagonal factors vs. VO score for languages with extreme values.

**Purpose**: Isolate typological outliers to study extreme cases

### `{side}_extreme_disorder_vs_vo.png`

**Description**: Disorder metrics vs. VO score for languages with extreme disorder values.

**Purpose**: Understand relationship between word order type and order flexibility

---

## Language Subset Plots

All main plot types (MAL, HCS, DIAG) are generated for multiple language subsets:

### Subset Definitions

1. **All Languages**: Complete dataset
2. **Indo-European (`IE-` prefix)**: Indo-European family only
3. **Non-Indo-European (`noIE-` prefix)**: All other families
4. **Head-Initial (`headInit-` prefix)**: Head initiality score > 0.5
5. **Head-Final (`headFinal-` prefix)**: Head initiality score ≤ 0.5
6. **VO (`VO-` prefix)**: VO score > 0.666
7. **OV (`OV-` prefix)**: VO score < 0.333
8. **NDO (`NDO-` prefix)**: No Dominant Order (0.333 ≤ VO score ≤ 0.666)

### File Naming Convention

```
{subset_prefix}MAL_{position1}_vs_{position2}.png
{subset_prefix}HCS_{position_pattern}.png
{subset_prefix}DIAG_{side}_{positions}.png
```

**Examples**:
- `IE-MAL_right_1_totright_2_vs_right_2_totright_2.png` (Indo-European only)
- `VO-HCS_right_2_totright_2_vs_right_1_totright_1.png` (VO languages only)
- `headInit-DIAG_left_3_totleft_3_vs_left_2_totleft_2.png` (Head-initial languages)

### Purpose

- **Control for typology**: Do patterns persist across different word order types?
- **Family-specific effects**: Are Indo-European patterns universal?
- **Correlational analysis**: Does head position affect constituent size patterns?

---

## Plot Generation Pipeline

### Notebook 05: Comprehensive Plot Generation

**Cell 7**: Word vs. Letter Size  
**Cell 10**: Language filters and data preparation  
**Cell 11**: Batch scatter plot generation (800+ plots, ~12 minutes on 80 cores)

**Parallelization**:
- Uses Python's `multiprocessing` for parallel plot generation
- Processes multiple language subsets simultaneously
- Progress bars show completion status

### Customization

All plot functions accept parameters for:
- `figsize`: Figure dimensions (default: 12×10)
- `palette`: Color mapping for language families
- `output_dir`: Where to save plots
- `dpi`: Resolution (default: 300)

---

## Reading the Plots

### Color Coding

Languages are color-coded by family using the `appearance_dict`:
- **Indo-European**: Often blue
- **Sino-Tibetan**: Often red
- **Niger-Congo**: Often green
- **Austronesian**: Often orange
- (Specific colors defined in `data/metadata.pkl`)

### Statistical Annotations

Most scatter plots include:
- **Pearson correlation (r)**: Linear correlation coefficient
- **p-value**: Statistical significance
- **Regression line**: Best-fit linear model
- **N**: Sample size (number of languages)

### Reference Lines

- **Diagonal (y = x)**: Identity line for comparison
- **Vertical/Horizontal lines**: Typological boundaries (e.g., VO score = 0.5)

---

## Data Quality Indicators

Starting from recent updates, helix tables include validation footers:
- **✓ Data Quality**: Computed from sufficient samples (≥5)
- **⚠️ Data Quality**: Computed from insufficient samples (<5)
- **⚠️ Low n positions**: Lists positions with low sample counts
- **⚠️ Low n factors**: Lists growth factors with low sample counts

These indicators help assess statistical confidence in geometric mean calculations.

---

## Further Reading

- **Helix Tables**: See [`HELIX_TABLE_USER_GUIDE.md`](HELIX_TABLE_USER_GUIDE.md)
- **Geometric Means**: See [`GEOMETRIC_MEAN_INFO.md`](GEOMETRIC_MEAN_INFO.md)
- **Word Order**: See [`WORD_ORDER_CLASSIFICATION.md`](WORD_ORDER_CLASSIFICATION.md)
- **Pipeline**: See [`PIPELINE_ARCHITECTURE.md`](PIPELINE_ARCHITECTURE.md)

---

## Quick Reference

| Plot Type | What It Shows | Key Question |
|-----------|---------------|--------------|
| **MAL** | Constituent size correlations | Do positions grow together? |
| **HCS** | Hierarchical complexity | Does nesting increase size? |
| **DIAG** | Diagonal growth factors | How does complexity scale? |
| **Head Init** | Typological correlations | Does head position matter? |
| **SV vs VO** | Word order patterns | Subject vs. object order flexibility? |
| **Bastard** | Non-projectivity | Which dependencies displace? |
| **Disorder** | Order flexibility | Structural complexity vs. linear order? |
| **Word vs Letter** | Size correspondence | Words vs. letters correlation? |

---

**Last Updated**: December 25, 2025  
**Generated By**: Typometric Analysis Pipeline v2.17
